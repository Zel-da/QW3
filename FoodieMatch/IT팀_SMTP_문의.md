# IT팀 SMTP 설정 요청

## 요청 배경
안전보건관리 시스템에서 다음 기능을 위해 이메일 발송이 필요합니다:
- ✅ 안전교육 미이수자 알림
- ✅ TBM 일일 작성 알림
- ✅ 월별 안전점검 알림
- ✅ 월별 보고서 결재 알림

## 요청 사항

### 1. 나온 소프트 그룹웨어 SMTP 정보 제공
다음 정보를 제공해주시기 바랍니다:

```
필요한 정보:
- SMTP 서버 주소: smtp.naonsoft.com (예시)
- SMTP 포트: 587 또는 465
- 인증 방식: TLS/SSL
- 발신 계정 (이메일 주소)
- 발신 계정 비밀번호 또는 앱 비밀번호
- 발신자 표시명: 예) "안전보건팀"
```

### 2. 네트워크 방화벽 설정
현재 SMTP 포트(587, 465)가 차단되어 있는 것으로 보입니다.

**요청:**
- 내부망에서 나온 소프트 SMTP 서버로의 아웃바운드 연결 허용
- 포트: 587 (TLS) 또는 465 (SSL)
- 대상: 나온 소프트 SMTP 서버 IP/도메인

### 3. 발신 제한 설정 (선택사항)
**권장 사항:**
- 일일 발송 제한: 500건
- 시간당 발송 제한: 100건
- 스팸 방지 설정: SPF, DKIM 레코드 설정

## 기술 세부사항

### 현재 구현된 이메일 서비스 스펙
```javascript
// nodemailer 사용
const emailConfig = {
  host: process.env.SMTP_HOST,        // 나온 소프트 SMTP 서버
  port: process.env.SMTP_PORT,        // 587 (TLS) 또는 465 (SSL)
  secure: (port === 465),              // SSL 사용 여부
  auth: {
    user: process.env.SMTP_USER,      // 발신 계정
    pass: process.env.SMTP_PASSWORD   // 비밀번호
  },
  tls: {
    rejectUnauthorized: false,         // 자체 서명 인증서 허용
    minVersion: 'TLSv1'
  },
  connectionTimeout: 30000,
  greetingTimeout: 30000,
  socketTimeout: 30000
};
```

### 발송 예상 빈도
| 구분 | 빈도 | 예상 건수/일 |
|-----|------|------------|
| 안전교육 알림 | 주 1회 | 50건 |
| TBM 작성 알림 | 매일 오전 | 20건 |
| 안전점검 알림 | 월 1회 | 20건 |
| 결재 알림 | 수시 | 10건 |
| **총계** | | **약 100건/일** |

## 테스트 요청
SMTP 정보 제공 후 다음 테스트를 진행하겠습니다:
1. ✅ 연결 테스트 (`transporter.verify()`)
2. ✅ 단일 메일 발송 테스트
3. ✅ 대량 메일 발송 테스트 (10건)
4. ✅ 첨부파일 포함 메일 테스트

## 대안 (SMTP 사용 불가 시)
나온 소프트 SMTP를 사용할 수 없는 경우, 다음 대안을 고려할 수 있습니다:

### Option 1: 나온 소프트 API 연동
- 나온 소프트 REST API를 통한 메일 발송
- API 키 발급 필요

### Option 2: 외부 SMTP 서비스
- Gmail SMTP (Google Workspace)
- AWS SES (Simple Email Service)
- 네이버 SMTP

단, **보안 및 회사 정책상 내부 그룹웨어 사용을 권장**합니다.

## 담당자 정보
- 시스템: 안전보건관리 시스템
- 개발 담당: [담당자명]
- 연락처: [연락처]
- 긴급도: 중간 (운영 시작 전 설정 필요)

## 참고사항
- 발송되는 모든 메일은 시스템 자동 발송입니다
- 수신 거부 기능이 포함되어 있습니다
- 개인정보는 이름, 이메일만 사용합니다
- 메일 내용은 템플릿화되어 있습니다

---

**문의 일시:** 2025년 11월 6일
**회신 요청 기한:** 가능한 빠른 시일 내
