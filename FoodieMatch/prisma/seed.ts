import { PrismaClient, Role } from '@prisma/client';
import bcrypt from 'bcrypt';

const prisma = new PrismaClient();

const tbmData = `1,조립 전기라인,1,조립 전기라인 일일 안전점검,TBM 점검,도입,아침 체조 스트레칭,10
1,조립 전기라인,1,조립 전기라인 일일 안전점검,TBM 점검,건강/복장/보호구,음주상태,20
1,조립 전기라인,1,조립 전기라인 일일 안전점검,TBM 점검,건강/복장/보호구,건강상태,30
1,조립 전기라인,1,조립 전기라인 일일 안전점검,TBM 점검,건강/복장/보호구,복장,40
1,조립 전기라인,1,조립 전기라인 일일 안전점검,TBM 점검,건강/복장/보호구,보호구,50
1,조립 전기라인,1,조립 전기라인 일일 안전점검,TBM 점검,지시,생산회의,60
1,조립 전기라인,1,조립 전기라인 일일 안전점검,TBM 점검,지시,금일 안전작업 내용지시,70
1,조립 전기라인,1,조립 전기라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,각 팀원 최근 아차사고 사례 공유,80
1,조립 전기라인,1,조립 전기라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,작업장소 등 환경에 대한 위험,90
1,조립 전기라인,1,조립 전기라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"입고, 출고, 조립, 가공 등 공정 순서(작업방법)에 대한 위험",100
1,조립 전기라인,1,조립 전기라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"크레인, 리프트, 지게차 등 설비에 대한 위험",110
1,조립 전기라인,1,조립 전기라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"작업장 개구부, 고소작업 등에 대한 위험",120
1,조립 전기라인,1,조립 전기라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"그라인더, 인양달기구 등 사용하는 기구,도구에 대한 위험",130
1,조립 전기라인,1,조립 전기라인 일일 안전점검,확인,지적확인,"중점 위험요인 선정 구호 제창 (중점도 높은 사항으로 선정)",140
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,공통,"설비, 기계, 기구 등 점검 후 조치",150
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,공통,각 종 기계기구의 이상 유무,160
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,공통,"작업장 정리정돈, 통로확보 개구부 확인 점검결과",170
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,"올바른 자세, 복장 및 보호구착용 여부",180
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,"주행로 상측 및 트롤리가 횡행하는 레일, 와이어 통하는 곳의 상태",190
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,권과방지장치ㆍ브레이크ㆍ클러치 및 운전장치의 기능,200
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,"슬링, 와이어로프등의 이상 유무 및 매달린 상태",210
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,인양물 하부 작업 여부,220
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"안전벨트 착용 상태 및 작업장내 과속, 급선회, 급출발 등 이상유무",230
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"제동장치 및 조종장치, 하역장치 및 유압장치 기능의 이상유무",240
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"전조등ㆍ후미등ㆍ방향지시기 및 경보장치, 바퀴 기능의 이상유무",250
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"소화기구, 환기조치, 화재예방 피난교육 등",260
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"용접,용단,연마 , 절단작업시 소화기구, 비산 방지, 환기 조치여부",270
1,조립 전기라인,1,조립 전기라인 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"통전 전류, 접지 상태, 가스, 유해물질 등 작업환경 점검",280
1,조립 전기라인,1,조립 전기라인 일일 안전점검,인원관리,시작/종료,"작업시작 및 종료 시, 담당직원의 투입 시/퇴장 시 인원 점검",290
2,제관라인,2,제관라인 일일 안전점검,TBM 점검,도입,아침 체조 스트레칭,10
2,제관라인,2,제관라인 일일 안전점검,TBM 점검,건강/복장/보호구,음주상태,20
2,제관라인,2,제관라인 일일 안전점검,TBM 점검,건강/복장/보호구,건강상태,30
2,제관라인,2,제관라인 일일 안전점검,TBM 점검,건강/복장/보호구,복장,40
2,제관라인,2,제관라인 일일 안전점검,TBM 점검,건강/복장/보호구,보호구,50
2,제관라인,2,제관라인 일일 안전점검,TBM 점검,지시,생산회의,60
2,제관라인,2,제관라인 일일 안전점검,TBM 점검,지시,금일 안전작업 내용지시,70
2,제관라인,2,제관라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,각 팀원 최근 아차사고 사례 공유,80
2,제관라인,2,제관라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,작업장소 등 환경에 대한 위험,90
2,제관라인,2,제관라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"입고, 출고, 조립, 가공 등 공정 순서(작업방법)에 대한 위험",100
2,제관라인,2,제관라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"크레인, 리프트, 지게차 등 설비에 대한 위험",110
2,제관라인,2,제관라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"작업장 개구부, 고소작업 등에 대한 위험",120
2,제관라인,2,제관라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"그라인더, 인양달기구 등 사용하는 기구,도구에 대한 위험",130
2,제관라인,2,제관라인 일일 안전점검,확인,지적확인,"중점 위험요인 선정 구호 제창 (중점도 높은 사항으로 선정)",140
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,공통,"설비, 기계, 기구 등 점검 후 조치",150
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,공통,각 종 기계기구의 이상 유무,160
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,공통,"작업장 정리정돈, 통로확보 개구부 확인 점검결과",170
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,"올바른 자세, 복장 및 보호구착용 여부",180
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,"주행로 상측 및 트롤리가 횡행하는 레일, 와이어 통하는 곳의 상태",190
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,권과방지장치ㆍ브레이크ㆍ클러치 및 운전장치의 기능,200
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,"슬링, 와이어로프등의 이상 유무 및 매달린 상태",210
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,인양물 하부 작업 여부,220
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"안전벨트 착용 상태 및 작업장내 과속, 급선회, 급출발 등 이상유무",230
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"제동장치 및 조종장치, 하역장치 및 유압장치 기능의 이상유무",240
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"전조등ㆍ후미등ㆍ방향지시기 및 경보장치, 바퀴 기능의 이상유무",250
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"소화기구, 환기조치, 화재예방 피난교육 등",260
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"용접,용단,연마 , 절단작업시 소화기구, 비산 방지, 환기 조치여부",270
2,제관라인,2,제관라인 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"통전 전류, 접지 상태, 가스, 유해물질 등 작업환경 점검",280
2,제관라인,2,제관라인 일일 안전점검,인원관리,시작/종료,"작업시작 및 종료 시, 담당직원의 투입 시/퇴장 시 인원 점검",290
3,가공라인,3,가공라인 일일 안전점검,TBM 점검,도입,아침 체조 스트레칭,10
3,가공라인,3,가공라인 일일 안전점검,TBM 점검,건강/복장/보호구,음주상태,20
3,가공라인,3,가공라인 일일 안전점검,TBM 점검,건강/복장/보호구,건강상태,30
3,가공라인,3,가공라인 일일 안전점검,TBM 점검,건강/복장/보호구,복장,40
3,가공라인,3,가공라인 일일 안전점검,TBM 점검,건강/복장/보호구,보호구,50
3,가공라인,3,가공라인 일일 안전점검,TBM 점검,지시,생산회의,60
3,가공라인,3,가공라인 일일 안전점검,TBM 점검,지시,금일 안전작업 내용지시,70
3,가공라인,3,가공라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,각 팀원 최근 아차사고 사례 공유,80
3,가공라인,3,가공라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,작업장소 등 환경에 대한 위험,90
3,가공라인,3,가공라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"입고, 출고, 조립, 가공 등 공정 순서(작업방법)에 대한 위험",100
3,가공라인,3,가공라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"크레인, 리프트, 지게차 등 설비에 대한 위험",110
3,가공라인,3,가공라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"작업장 개구부, 고소작업 등에 대한 위험",120
3,가공라인,3,가공라인 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"그라인더, 인양달기구 등 사용하는 기구,도구에 대한 위험",130
3,가공라인,3,가공라인 일일 안전점검,확인,지적확인,"중점 위험요인 선정 구호 제창 (중점도 높은 사항으로 선정)",140
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,공통,"설비, 기계, 기구 등 점검 후 조치",150
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,공통,각 종 기계기구의 이상 유무,160
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,공통,"작업장 정리정돈, 통로확보 개구부 확인 점검결과",170
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,"올바른 자세, 복장 및 보호구착용 여부",180
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,"주행로 상측 및 트롤리가 횡행하는 레일, 와이어 통하는 곳의 상태",190
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,권과방지장치ㆍ브레이크ㆍ클러치 및 운전장치의 기능,200
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,"슬링, 와이어로프등의 이상 유무 및 매달린 상태",210
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,인양물 하부 작업 여부,220
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"안전벨트 착용 상태 및 작업장내 과속, 급선회, 급출발 등 이상유무",230
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"제동장치 및 조종장치, 하역장치 및 유압장치 기능의 이상유무",240
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"전조등ㆍ후미등ㆍ방향지시기 및 경보장치, 바퀴 기능의 이상유무",250
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"전단기, 절곡기 등의 방호장치의 기능",260
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"클러치, 브레이크, 금형, 고정볼트, 칼날, 테이블 등의 상태",270
3,가공라인,3,가공라인 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"통전 전류, 접지 상태, 가스, 유해물질 등 작업환경 점검",280
3,가공라인,3,가공라인 일일 안전점검,인원관리,시작/종료,"작업시작 및 종료 시, 담당직원의 투입 시/퇴장 시 인원 점검",290
4,연구소,4,연구소 일일 안전점검,TBM 점검,도입,아침 체조 스트레칭,10
4,연구소,4,연구소 일일 안전점검,TBM 점검,건강/복장/보호구,음주상태,20
4,연구소,4,연구소 일일 안전점검,TBM 점검,건강/복장/보호구,건강상태,30
4,연구소,4,연구소 일일 안전점검,TBM 점검,건강/복장/보호구,복장,40
4,연구소,4,연구소 일일 안전점검,TBM 점검,건강/복장/보호구,보호구,50
4,연구소,4,연구소 일일 안전점검,TBM 점검,지시,생산회의,60
4,연구소,4,연구소 일일 안전점검,TBM 점검,지시,금일 안전작업 내용지시,70
4,연구소,4,연구소 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,각 팀원 최근 아차사고 사례 공유,80
4,연구소,4,연구소 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,작업장소 등 환경에 대한 위험,90
4,연구소,4,연구소 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"입고, 출고, 조립, 가공 등 공정 순서(작업방법)에 대한 위험",100
4,연구소,4,연구소 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"크레인, 리프트, 지게차 등 설비에 대한 위험",110
4,연구소,4,연구소 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"작업장 개구부, 고소작업 등에 대한 위험",120
4,연구소,4,연구소 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"그라인더, 인양달기구 등 사용하는 기구,도구에 대한 위험",130
4,연구소,4,연구소 일일 안전점검,확인,지적확인,"중점 위험요인 선정 구호 제창 (중점도 높은 사항으로 선정)",140
4,연구소,4,연구소 일일 안전점검,관리 감독자 일일 안전 점검,공통,사무실 및 작업장 정리정돈,150
4,연구소,4,연구소 일일 안전점검,관리 감독자 일일 안전 점검,공통,"현장 출입 시 안전보호구 착용 유무(안전모, 안전화 등)",160
4,연구소,4,연구소 일일 안전점검,관리 감독자 일일 안전 점검,공통,종사자의 건강상태 이상유무,170
4,연구소,4,연구소 일일 안전점검,관리 감독자 일일 안전 점검,사무실안전,파티션이나 그 밖에 넘어질 위험 여부,180
4,연구소,4,연구소 일일 안전점검,관리 감독자 일일 안전 점검,사무실안전,끼이거나 부딪힐 수 있는 열린 서랍 등이 있는지 여부,190
4,연구소,4,연구소 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"고소작업시 안전모 착용, 안전고리 체결 유무",200
4,연구소,4,연구소 일일 안전점검,관리 감독자 일일 안전 점검,테스트작업,돌가루 등 비산 위험이 있는곳에서 보안경 착용 여부,210
4,연구소,4,연구소 일일 안전점검,관리 감독자 일일 안전 점검,테스트작업,작업자가 낙하물 범위 밖으로 있는지 여부,220
4,연구소,4,연구소 일일 안전점검,인원관리,시작/종료,"작업시작 및 종료 시, 담당직원의 투입 시/퇴장 시 인원 점검",230
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,TBM 점검,도입,아침 체조 스트레칭,10
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,TBM 점검,건강/복장/보호구,음주상태,20
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,TBM 점검,건강/복장/보호구,건강상태,30
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,TBM 점검,건강/복장/보호구,복장,40
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,TBM 점검,건강/복장/보호구,보호구,50
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,TBM 점검,지시,생산회의,60
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,TBM 점검,지시,금일 안전작업 내용지시,70
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,각 팀원 최근 아차사고 사례 공유,80
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,작업장소 등 환경에 대한 위험,90
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"입고, 출고, 조립, 가공 등 공정 순서(작업방법)에 대한 위험",100
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"크레인, 리프트, 지게차 등 설비에 대한 위험",110
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"작업장 개구부, 고소작업 등에 대한 위험",120
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"그라인더, 인양달기구 등 사용하는 기구,도구에 대한 위험",130
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,확인,지적확인,"중점 위험요인 선정 구호 제창 (중점도 높은 사항으로 선정)",140
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,관리 감독자 일일 안전 점검,공통,사무실 및 작업장 정리정돈,150
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,관리 감독자 일일 안전 점검,공통,"현장 출입 시 안전보호구 착용 유무(안전모, 안전화 등)",160
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,관리 감독자 일일 안전 점검,공통,종사자의 건강상태 이상유무,170
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,관리 감독자 일일 안전 점검,중량물운반 작업,중량물 작업시 올바른 자세 및 복장 교육,180
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,관리 감독자 일일 안전 점검,중량물운반 작업,중량물 취급시 바닥의 상태 등 운반환경 점검,190
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"안전벨트 착용 상태 및 작업장내 과속, 급선회, 급출발 등 이상유무",200
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"제동장치 및 조종장치, 하역장치 및 유압장치 기능의 이상유무",210
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"전조등ㆍ후미등ㆍ방향지시기 및 경보장치, 바퀴 기능의 이상유무",220
5,지재/부품/출하,5,지재/부품/출하 일일 안전점검,인원관리,시작/종료,"작업시작 및 종료 시, 담당직원의 투입 시/퇴장 시 인원 점검",230
6,서비스,6,서비스 일일 안전점검,TBM 점검,도입,아침 체조 스트레칭,10
6,서비스,6,서비스 일일 안전점검,TBM 점검,건강/복장/보호구,음주상태,20
6,서비스,6,서비스 일일 안전점검,TBM 점검,건강/복장/보호구,건강상태,30
6,서비스,6,서비스 일일 안전점검,TBM 점검,건강/복장/보호구,복장,40
6,서비스,6,서비스 일일 안전점검,TBM 점검,건강/복장/보호구,보호구,50
6,서비스,6,서비스 일일 안전점검,TBM 점검,지시,생산회의,60
6,서비스,6,서비스 일일 안전점검,TBM 점검,지시,금일 안전작업 내용지시,70
6,서비스,6,서비스 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,각 팀원 최근 아차사고 사례 공유,80
6,서비스,6,서비스 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,작업장소 등 환경에 대한 위험,90
6,서비스,6,서비스 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"입고, 출고, 조립, 가공 등 공정 순서(작업방법)에 대한 위험",100
6,서비스,6,서비스 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"크레인, 리프트, 지게차 등 설비에 대한 위험",110
6,서비스,6,서비스 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"작업장 개구부, 고소작업 등에 대한 위험",120
6,서비스,6,서비스 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"그라인더, 인양달기구 등 사용하는 기구,도구에 대한 위험",130
6,서비스,6,서비스 일일 안전점검,확인,지적확인,"중점 위험요인 선정 구호 제창 (중점도 높은 사항으로 선정)",140
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,공통,사무실 및 작업장 정리정돈,150
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,공통,"현장 출입 시 안전보호구 착용 유무(안전모, 안전화 등)",160
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,공통,종사자의 건강상태 이상유무,170
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,"주행로 상측 및 트롤리가 횡행하는 레일, 와이어 통하는 곳의 상태",180
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,권과방지장치ㆍ브레이크ㆍ클러치 및 운전장치의 기능,190
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,"슬링, 와이어로프등의 이상 유무 및 매달린 상태, 하부 작업 여부",200
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,중량물취급작업 크레인,인양물 하부 작업 여부,210
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,공기압축기,"드레인밸브, 압력방출장치, 언로드밸브, 윤활유, 덮개 이상 여부",220
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"안전벨트 착용 상태 및 작업장내 과속, 급선회, 급출발 등 이상유무",230
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"제동장치 및 조종장치, 하역장치 및 유압장치 기능의 이상유무",240
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,지게차 하역운반기계,"전조등ㆍ후미등ㆍ방향지시기 및 경보장치, 바퀴 기능의 이상유무",250
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"고소작업시 안전모 착용, 안전고리 체결 유무",260
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"용접,용단,연마 , 절단작업시 소화기구, 비산 방지, 환기 조치여부",270
6,서비스,6,서비스 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"통전 전류, 접지 상태, 가스, 유해물질 등 작업환경 점검",280
6,서비스,6,서비스 일일 안전점검,인원관리,시작/종료,"작업시작 및 종료 시, 담당직원의 투입 시/퇴장 시 인원 점검",290
7,품질,7,품질 일일 안전점검,TBM 점검,도입,아침 체조 스트레칭,10
7,품질,7,품질 일일 안전점검,TBM 점검,건강/복장/보호구,음주상태,20
7,품질,7,품질 일일 안전점검,TBM 점검,건강/복장/보호구,건강상태,30
7,품질,7,품질 일일 안전점검,TBM 점검,건강/복장/보호구,복장,40
7,품질,7,품질 일일 안전점검,TBM 점검,건강/복장/보호구,보호구,50
7,품질,7,품질 일일 안전점검,TBM 점검,지시,생산회의,60
7,품질,7,품질 일일 안전점검,TBM 점검,지시,금일 안전작업 내용지시,70
7,품질,7,품질 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,각 팀원 최근 아차사고 사례 공유,80
7,품질,7,품질 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,작업장소 등 환경에 대한 위험,90
7,품질,7,품질 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"입고, 출고, 조립, 가공 등 공정 순서(작업방법)에 대한 위험",100
7,품질,7,품질 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"크레인, 리프트, 지게차 등 설비에 대한 위험",110
7,품질,7,품질 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"작업장 개구부, 고소작업 등에 대한 위험",120
7,품질,7,품질 일일 안전점검,위험 평가 및 개선 대책,위험예지훈련,"그라인더, 인양달기구 등 사용하는 기구,도구에 대한 위험",130
7,품질,7,품질 일일 안전점검,확인,지적확인,"중점 위험요인 선정 구호 제창 (중점도 높은 사항으로 선정)",140
7,품질,7,품질 일일 안전점검,관리 감독자 일일 안전 점검,공통,사무실 및 작업장 정리정돈,150
7,품질,7,품질 일일 안전점검,관리 감독자 일일 안전 점검,공통,"현장 출입 시 안전보호구 착용 유무(안전모, 안전화 등)",160
7,품질,7,품질 일일 안전점검,관리 감독자 일일 안전 점검,공통,종사자의 건강상태 이상유무,170
7,품질,7,품질 일일 안전점검,관리 감독자 일일 안전 점검,사무실안전,파티션이나 그 밖에 넘어질 위험 여부,180
7,품질,7,품질 일일 안전점검,관리 감독자 일일 안전 점검,사무실안전,끼이거나 부딪힐 수 있는 열린 서랍 등이 있는지 여부,190
7,품질,7,품질 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"고소작업시 안전모 착용, 안전고리 체결 유무",200
7,품질,7,품질 일일 안전점검,관리 감독자 일일 안전 점검,중량물운반 작업,중량물 작업시 올바른 자세 및 복장 교육,210
7,품질,7,품질 일일 안전점검,관리 감독자 일일 안전 점검,중량물운반 작업,중량물 취급시 바닥의 상태 등 운반환경 점검,220
7,품질,7,품질 일일 안전점검,인원관리,시작/종료,"작업시작 및 종료 시, 담당직원의 투입 시/퇴장 시 인원 점검",230
8,인사총무팀,8,인사총무팀 일일 안전점검,TBM 점검,도입,아침 체조 스트레칭,10
8,인사총무팀,8,인사총무팀 일일 안전점검,TBM 점검,건강/복장/보호구,음주상태,20
8,인사총무팀,8,인사총무팀 일일 안전점검,TBM 점검,건강/복장/보호구,건강상태,30
8,인사총무팀,8,인사총무팀 일일 안전점검,TBM 점검,건강/복장/보호구,복장,40
8,인사총무팀,8,인사총무팀 일일 안전점검,TBM 점검,건강/복장/보호구,보호구,50
8,인사총무팀,8,인사총무팀 일일 안전점검,TBM 점검,지시,생산회의,60
8,인사총무팀,8,인사총무팀 일일 안전점검,TBM 점검,지시,금일 안전작업 내용지시,70
8,인사총무팀,8,인사총무팀 일일 안전점검,교육,사고사례 공유,타사 사고사례 및 아차 사고사례 공유,80
8,인사총무팀,8,인사총무팀 일일 안전점검,관리 감독자 일일 안전 점검,공통,사무실 및 작업장 정리정돈,90
8,인사총무팀,8,인사총무팀 일일 안전점검,관리 감독자 일일 안전 점검,공통,"현장 출입 시 안전보호구 착용 유무(안전모, 안전화 등)",100
8,인사총무팀,8,인사총무팀 일일 안전점검,관리 감독자 일일 안전 점검,공통,종사자의 건강상태 이상유무,110
8,인사총무팀,8,인사총무팀 일일 안전점검,관리 감독자 일일 안전 점검,공통,담당직원 작업시 안전상태 확인,120
8,인사총무팀,8,인사총무팀 일일 안전점검,인원관리,시작/종료,"작업시작 및 종료 시, 담당직원의 투입 시/퇴장 시 인원 점검",130
9,생산기술팀,9,생산기술팀 일일 안전점검,TBM 점검,도입,아침 체조 스트레칭,10
9,생산기술팀,9,생산기술팀 일일 안전점검,TBM 점검,건강/복장/보호구,음주상태,20
9,생산기술팀,9,생산기술팀 일일 안전점검,TBM 점검,건강/복장/보호구,건강상태,30
9,생산기술팀,9,생산기술팀 일일 안전점검,TBM 점검,건강/복장/보호구,복장,40
9,생산기술팀,9,생산기술팀 일일 안전점검,TBM 점검,건강/복장/보호구,보호구,50
9,생산기술팀,9,생산기술팀 일일 안전점검,TBM 점검,지시,생산회의,60
9,생산기술팀,9,생산기술팀 일일 안전점검,TBM 점검,지시,금일 안전작업 내용지시,70
9,생산기술팀,9,생산기술팀 일일 안전점검,교육,사고사례 공유,타사 사고사례 및 아차 사고사례 공유,80
9,생산기술팀,9,생산기술팀 일일 안전점검,관리 감독자 일일 안전 점검,공통,사무실 및 작업장 정리정돈,90
9,생산기술팀,9,생산기술팀 일일 안전점검,관리 감독자 일일 안전 점검,공통,"현장 출입 시 안전보호구 착용 유무(안전모, 안전화 등)",100
9,생산기술팀,9,생산기술팀 일일 안전점검,관리 감독자 일일 안전 점검,공통,종사자의 건강상태 이상유무,110
9,생산기술팀,9,생산기술팀 일일 안전점검,관리 감독자 일일 안전 점검,공통,담당직원 작업시 안전상태 확인,120
9,생산기술팀,9,생산기술팀 일일 안전점검,관리 감독자 일일 안전 점검,정비작업,정비작업시 LOTO 표지부착 상태,130
9,생산기술팀,9,생산기술팀 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"고소작업시 안전모 착용, 안전고리 체결 유무",140
9,생산기술팀,9,생산기술팀 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"용접,용단,연마 , 절단작업시 소화기구, 비산 방지, 환기 조치여부",150
9,생산기술팀,9,생산기술팀 일일 안전점검,관리 감독자 일일 안전 점검,위험작업조치,"통전 전류, 접지 상태, 가스, 유해물질 등 작업환경 점검",160
9,생산기술팀,9,생산기술팀 일일 안전점검,인원관리,시작/종료,"작업시작 및 종료 시, 담당직원의 투입 시/퇴장 시 인원 점검",170`;

async function main() {
  console.log(`Start seeding ...`);

  // Admin User Seed
  const adminUsername = 'admin';
  const adminPassword = 'admin1234';
  const hashedPassword = await bcrypt.hash(adminPassword, 10);
  const adminUser = await prisma.user.upsert({
    where: { username: adminUsername },
    update: { password: hashedPassword, name: 'Admin User', email: 'admin@example.com', role: Role.ADMIN },
    create: {
      username: adminUsername,
      name: 'Admin User',
      email: 'admin@example.com',
      password: hashedPassword,
      role: Role.ADMIN,
    },
  });
  console.log(`Created admin user: ${adminUser.username}`);

  const admin1Username = 'admin1';
  const admin1Password = 'admin1234';
  const hashedAdmin1Password = await bcrypt.hash(admin1Password, 10);
  const admin1User = await prisma.user.upsert({
    where: { username: admin1Username },
    update: { password: hashedAdmin1Password, name: 'Admin User 1', email: 'admin1@example.com', role: Role.ADMIN },
    create: {
      username: admin1Username,
      name: 'Admin User 1',
      email: 'admin1@example.com',
      password: hashedAdmin1Password,
      role: Role.ADMIN,
    },
  });
  console.log(`Created admin user: ${admin1User.username}`);

  // TBM Data Seed
  const lines = tbmData.split('\n');
  const teamsMap = new Map<number, { name: string; templates: Map<number, { name: string; items: any[] }> }>();

  for (const line of lines) {
    // Simple CSV parsing, handling quoted commas
    const parts = [];
    let inQuote = false;
    let currentPart = '';
    for (let i = 0; i < line.length; i++) {
      const char = line[i];
      if (char === '"') {
        inQuote = !inQuote;
      } else if (char === ',') {
        if (inQuote) {
          currentPart += char;
        } else {
          parts.push(currentPart.trim());
          currentPart = '';
        }
      } else {
        currentPart += char;
      }
    }
    parts.push(currentPart.trim()); // Push the last part

    const [teamIdStr, teamName, templateIdStr, templateName, category, subCategory, description, displayOrderStr] = parts;

    const teamId = parseInt(teamIdStr);
    const templateId = parseInt(templateIdStr);
    const displayOrder = parseInt(displayOrderStr);

    if (!teamsMap.has(teamId)) {
      teamsMap.set(teamId, { name: teamName, templates: new Map() });
    }
    const teamEntry = teamsMap.get(teamId)!;

    if (!teamEntry.templates.has(templateId)) {
      teamEntry.templates.set(templateId, { name: templateName, items: [] });
    }
    const templateEntry = teamEntry.templates.get(templateId)!;

    templateEntry.items.push({
      category,
      subCategory: subCategory === '' ? null : subCategory,
      description: description.replace(/^"|"$/g, ''), // Remove surrounding quotes
      displayOrder,
    });
  }

  for (const [teamId, teamData] of teamsMap.entries()) {
    const team = await prisma.team.upsert({
      where: { id: teamId },
      update: { name: teamData.name },
      create: { id: teamId, name: teamData.name },
    });
    console.log(`Upserted Team: ${team.name} (ID: ${team.id})`);

    for (const [templateId, templateData] of teamData.templates.entries()) {
      const checklistTemplate = await prisma.checklistTemplate.upsert({
        where: { id: templateId },
        update: { name: templateData.name, teamId: team.id },
        create: { id: templateId, name: templateData.name, teamId: team.id },
      });
      console.log(`Upserted ChecklistTemplate: ${checklistTemplate.name} (ID: ${checklistTemplate.id}) for Team ${team.name}`);

      // Delete existing items for this template to prevent duplicates on re-seed
      await prisma.templateItem.deleteMany({
        where: { templateId: checklistTemplate.id },
      });

      for (const itemData of templateData.items) {
        await prisma.templateItem.create({
          data: {
            templateId: checklistTemplate.id,
            category: itemData.category,
            subCategory: itemData.subCategory,
            description: itemData.description,
            displayOrder: itemData.displayOrder,
          },
        });
      }
      console.log(`Seeded ${templateData.items.length} items for Template ${checklistTemplate.name}`);
    }
  }

  console.log(`Seeding finished.`);
}

main()
  .catch((e) => {
    console.error(e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });